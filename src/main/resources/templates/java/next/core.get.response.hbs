package com.chargebee.v4.models.{{module}}.responses;

{{#each imports}}
import {{packageName}}.{{name}};
{{/each}}
import com.chargebee.v4.models.BaseResponse;
import com.chargebee.v4.internal.JsonUtil;
import com.chargebee.v4.transport.Response;
import java.math.BigDecimal;
import java.util.List;
import java.sql.Timestamp;

/**
 * Immutable response object for {{name}} operation.
 * Contains the response data from a single resource get operation.
 */
public final class {{name}}Response extends BaseResponse {
    {{#each fields~}}
{{#if deprecated}}    @Deprecated
{{/if}}    private final {{{type}}} {{name}};

    {{/each}}

    private {{name}}Response(Builder builder) {
        super(builder.httpResponse);
        {{#each fields}}
        this.{{name}} = builder.{{name}};
        {{/each}}
    }

    /**
     * Parse JSON response into {{name}}Response object.
     */
    public static {{name}}Response fromJson(String json) {
        return fromJson(json, null);
    }

    /**
     * Parse JSON response into {{name}}Response object with HTTP response.
     */
    public static {{name}}Response fromJson(String json, Response httpResponse) {
        try {
            Builder builder = builder();
            {{#each fields}}
            {{#if isMapType}}
            String __{{name}}Json = JsonUtil.getObject(json, "{{curlName}}");
            if (__{{name}}Json != null) {
            builder.{{name}}(JsonUtil.parseJsonObjectToMap(__{{name}}Json));
            }
            {{else if isComplexObjectType}}
            String __{{name}}Json = JsonUtil.getObject(json, "{{curlName}}");
            if (__{{name}}Json != null) {
            builder.{{name}}({{{type}}}.fromJson(__{{name}}Json));
            }
            {{else if isEnumType}}
            builder.{{name}}({{{type}}}.fromString(JsonUtil.getString(json, "{{curlName}}")));
            {{else if isListOfObjects}}
            {{#if listElementType}}
            {{#unless (eq listElementType "Object")}}
            String __{{name}}Json = JsonUtil.getArray(json, "{{curlName}}");
            if (__{{name}}Json != null) {
            builder.{{name}}(JsonUtil.parseObjectArray(__{{name}}Json).stream().map({{listElementType}}::fromJson).collect(java.util.stream.Collectors.toList()));
            }
            {{else}}
            String __{{name}}Json = JsonUtil.getArray(json, "{{curlName}}");
            if (__{{name}}Json != null) {
            builder.{{name}}(JsonUtil.parseObjectArray(__{{name}}Json).stream().collect(java.util.stream.Collectors.toList()));
            }
            {{/unless}}
            {{else}}
            String __{{name}}Json = JsonUtil.getArray(json, "{{curlName}}");
            if (__{{name}}Json != null) {
            builder.{{name}}(JsonUtil.parseArrayOfString(__{{name}}Json));
            }
            {{/if}}
            {{else if isListOfPrimitives}}
            String __{{name}}Json = JsonUtil.getArray(json, "{{curlName}}");
            if (__{{name}}Json != null) {
            builder.{{name}}(JsonUtil.parseArrayOfString(__{{name}}Json));
            }
            {{else if isListType}}
            {{#if (eq listElementType "Object")}}
            String __{{name}}Json = JsonUtil.getArray(json, "{{curlName}}");
            if (__{{name}}Json != null) {
            builder.{{name}}(JsonUtil.parseObjectArray(__{{name}}Json).stream()
                .map(JsonUtil::parseJsonObjectToMap)
                .collect(java.util.stream.Collectors.toList()));
            }
            {{else if (eq listElementType "java.util.Map<String, Object>")}}
            String __{{name}}Json = JsonUtil.getArray(json, "{{curlName}}");
            if (__{{name}}Json != null) {
            builder.{{name}}(JsonUtil.parseObjectArray(__{{name}}Json).stream()
                .map(JsonUtil::parseJsonObjectToMap)
                .collect(java.util.stream.Collectors.toList()));
            }
            {{else}}
            String __{{name}}Json = JsonUtil.getArray(json, "{{curlName}}");
            if (__{{name}}Json != null) {
            builder.{{name}}(JsonUtil.parseArrayOfString(__{{name}}Json));
            }
            {{/if}}
            {{else if isObjectType}}
            {{#if isPlainObjectType}}
            builder.{{name}}(JsonUtil.getObject(json, "{{curlName}}"));
            {{else}}
            String __{{name}}Json = JsonUtil.getObject(json, "{{curlName}}");
            if (__{{name}}Json != null) {
            builder.{{name}}({{{type}}}.fromJson(__{{name}}Json));
            }
            {{/if}}
            {{else}}
            builder.{{name}}(JsonUtil.get{{{type}}}(json, "{{curlName}}"));
            {{/if}}
            {{/each}}
            
            builder.httpResponse(httpResponse);
            return builder.build();
        } catch (Exception e) {
            throw new RuntimeException("Failed to parse {{name}}Response from JSON", e);
        }
    }

    /**
     * Create a new builder for {{name}}Response.
     */
    public static Builder builder() {
        return new Builder();
    }

    /**
     * Builder for {{name}}Response.
     */
    public static class Builder {
        {{#each fields}}
        private {{{type}}} {{name}};
        {{/each}}
        private Response httpResponse;

        private Builder() {}

        {{#each fields~}}
{{#if deprecated}}        @Deprecated
{{/if}}        public Builder {{name}}({{{type}}} {{name}}) {
            this.{{name}} = {{name}};
            return this;
        }

        {{/each}}
        public Builder httpResponse(Response httpResponse) {
            this.httpResponse = httpResponse;
            return this;
        }

        public {{name}}Response build() {
            return new {{name}}Response(this);
        }
    }

    {{#each fields~}}
{{#if deprecated}}    @Deprecated
{{/if}}    /** Get the {{name}} from the response. */
    public {{{type}}} {{getterName}}() {
        return {{name}};
    }

    {{/each}}
    @Override
    public String toString() {
        return "{{name}}Response{" +
        {{#each fields}}
            "{{#unless @first}}, {{/unless}}{{name}}=" + {{name}} +
        {{/each}}
            "}";
    }

    @Override
    public boolean equals(Object o) {
        if (this == o) return true;
        if (o == null || getClass() != o.getClass()) return false;
        {{#if fields}}
        {{name}}Response that = ({{name}}Response) o;
        return {{#each fields}}java.util.Objects.equals({{name}}, that.{{name}}){{#unless @last}} &&
            {{/unless}}{{/each}};
        {{else}}
        return true;
        {{/if}}
    }

    @Override
    public int hashCode() {
        {{#if fields}}
        return java.util.Objects.hash({{#each fields}}{{name}}{{#unless @last}}, {{/unless}}{{/each}});
        {{else}}
        return 0;
        {{/if}}
    }

    {{#each subModels}}
    public static class {{name}} {
        {{#each fields~}}
{{#if deprecated}}        @Deprecated
{{/if}}        private {{{type}}} {{name}};

        {{/each}}
    
        {{#each fields~}}
{{#if deprecated}}        @Deprecated
{{/if}}        public {{{type}}} {{getterName}}() {
            return {{name}};
        }

        {{/each}}

        public static {{name}} fromJson(String json) {
            {{name}} item = new {{name}}();
            {{#each fields}}
            {{#if isMapType}}
            String __{{name}}Json = JsonUtil.getObject(json, "{{curlName}}");
            if (__{{name}}Json != null) {
            item.{{name}} = JsonUtil.parseJsonObjectToMap(__{{name}}Json);
            }
            {{else if isComplexObjectType}}
            String __{{name}}Json = JsonUtil.getObject(json, "{{curlName}}");
            if (__{{name}}Json != null) {
            item.{{name}} = {{{type}}}.fromJson(__{{name}}Json);
            }
            {{else if isEnumType}}
            item.{{name}} = {{{type}}}.fromString(JsonUtil.getString(json, "{{curlName}}"));
            {{else if isListOfObjects}}
              {{#if listElementType}}
                {{#unless (eq listElementType "Object")}}
                String __{{name}}Json = JsonUtil.getArray(json, "{{curlName}}");
                if (__{{name}}Json != null) {
                item.{{name}} =
                    JsonUtil.parseObjectArray(__{{name}}Json)
                        .stream()
                        .map({{listElementType}}::fromJson)
                        .collect(java.util.stream.Collectors.toList());
                }
                {{else}}
                String __{{name}}Json = JsonUtil.getArray(json, "{{curlName}}");
                if (__{{name}}Json != null) {
                item.{{name}} =
                    JsonUtil.parseObjectArray(__{{name}}Json)
                        .stream()
                        .collect(java.util.stream.Collectors.toList());
                }
                {{/unless}}
              {{else}}
              String __{{name}}Json = JsonUtil.getArray(json, "{{curlName}}");
              if (__{{name}}Json != null) {
              item.{{name}} =
                  JsonUtil.parseArrayOfString(__{{name}}Json);
              }
              {{/if}}
            {{else if isListOfPrimitives}}
            String __{{name}}Json = JsonUtil.getArray(json, "{{curlName}}");
            if (__{{name}}Json != null) {
            item.{{name}} =
                JsonUtil.parseArrayOfString(__{{name}}Json);
            }
            {{else if isListType}}
            String __{{name}}Json = JsonUtil.getArray(json, "{{curlName}}");
            if (__{{name}}Json != null) {
            item.{{name}} =
                JsonUtil.parseObjectArray(__{{name}}Json).stream()
                    .collect(java.util.stream.Collectors.toList());
            }
            {{else if isObjectType}}
            {{#if (eq type "Object")}}
            item.{{name}} = JsonUtil.getObject(json, "{{curlName}}");
            {{else}}
            String __{{name}}Json = JsonUtil.getObject(json, "{{curlName}}");
            if (__{{name}}Json != null) {
            item.{{name}} = {{{type}}}.fromJson(__{{name}}Json);
            }
            {{/if}}
            {{else}}
            item.{{name}} = JsonUtil.get{{{type}}}(json, "{{curlName}}");
            {{/if}}
            {{/each}}
            return item;
        }

        @Override
        public String toString() {
            return "{{name}}{" +
            {{#each fields}}
                "{{#unless @first}}, {{/unless}}{{name}}=" + {{name}} +
            {{/each}}
                "}";
        }

        @Override
        public boolean equals(Object o) {
            if (this == o) return true;
            if (o == null || getClass() != o.getClass()) return false;
            {{#if fields}}
            {{name}} that = ({{name}}) o;
            return {{#each fields}}java.util.Objects.equals({{name}}, that.{{name}}){{#unless @last}} &&
                {{/unless}}{{/each}};
            {{else}}
            return true;
            {{/if}}
        }

        @Override
        public int hashCode() {
            {{#if fields}}
            return java.util.Objects.hash({{#each fields}}{{name}}{{#unless @last}}, {{/unless}}{{/each}});
            {{else}}
            return 0;
            {{/if}}
        }
    }
    {{/each}}
  
}
