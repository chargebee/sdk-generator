/*
 * This file is auto-generated by Chargebee.
 * For more information on how to make changes to this file, please see the README.
 * Reach out to dx@chargebee.com for any questions.
 * Copyright 2025 Chargebee Inc.
 */

package com.chargebee.core.services;

import com.chargebee.core.services.BaseService;
import com.chargebee.core.services.ServiceConfig;
import com.chargebee.client.ChargebeeClient;
import com.chargebee.client.request.RequestOptions;
import com.chargebee.transport.Response;
import java.util.Map;
import java.util.List;
{{#each operations}}
import com.chargebee.core.models.{{../packageName}}.params.{{paramsClassName}};
{{/each}}
{{#each operations}}
import com.chargebee.core.responses.{{../packageName}}.{{returnType}};
{{/each}}


public final class {{name}}Service extends BaseService<{{name}}Service> {
    
    private final ServiceConfig config;
    
    public {{name}}Service(ChargebeeClient client) {
        super(client);
        this.config = ServiceConfig.defaultConfig();
    }
    
    private {{name}}Service(ChargebeeClient client, RequestOptions options) {
        super(client, options);
        this.config = ServiceConfig.defaultConfig();
    }
    
    private {{name}}Service(ChargebeeClient client, RequestOptions options, ServiceConfig config) {
        super(client, options);
        this.config = config;
    }
    
    @Override
    {{name}}Service with(RequestOptions newOptions) {
        return new {{name}}Service(client, newOptions, config);
    }
    
    /**
     * Apply per-request options for this service instance.
     * Users can chain .withOptions or .options to set headers and other options.
     */
    public {{name}}Service withOptions(RequestOptions options) {
        return with(options);
    }
    
    // === Operations ===
    {{#each operations}}
    {{#if hasPathParams}}
    {{#if isListResponse}}
    
    /**
     * {{methodName}} a {{../packageName}} using immutable params (executes immediately) - returns raw Response.
     */
    Response {{methodName}}Raw(String {{pathParamName}}, {{paramsClassName}} params) throws Exception {
        String path = buildPathWithParams("{{path}}", "{{pathParam}}", {{pathParamName}});
        return get(path, params.toQueryParams());
    }

    /**
     * {{methodName}} a {{../packageName}} using raw JSON payload (executes immediately) - returns raw Response.
     */
    Response {{methodName}}Raw(String {{pathParamName}}, String jsonPayload) throws Exception {
        String path = buildPathWithParams("{{path}}", "{{pathParam}}", {{pathParamName}});
        throw new UnsupportedOperationException("JSON payload not supported for GET operations");
    }

    public {{returnType}} {{methodName}}(String {{pathParamName}}, {{paramsClassName}} params) throws Exception {
        Response response = {{methodName}}Raw({{pathParamName}}, params);
        return {{returnType}}.fromJson(response.getBodyAsString(), this, params, {{pathParamName}});
    }

    {{else}}
    
    /**
     * {{methodName}} a {{../packageName}} (executes immediately) - returns raw Response.
     */
    Response {{methodName}}Raw(String {{pathParamName}}) throws Exception {
        String path = buildPathWithParams("{{path}}", "{{pathParam}}", {{pathParamName}});
        {{#if (eq httpMethod "post")}}
        return post(path, null);
        {{else}}
        return get(path, null);
        {{/if}}
    }

    public {{returnType}} {{methodName}}(String {{pathParamName}}) throws Exception {
        Response response = {{methodName}}Raw({{pathParamName}});
        return parseResponse(response, {{returnType}}.class);
    }

    {{/if}}
    {{else}}
    
    /**
     * {{methodName}} a {{../packageName}} using immutable params (executes immediately) - returns raw Response.
     */
    Response {{methodName}}Raw({{paramsClassName}} params) throws Exception {
        {{#if (eq httpMethod "post")}}
        return post("{{path}}", params.toFormData());
        {{else}}
        return get("{{path}}", params.toQueryParams());
        {{/if}}
    }

    /**
     * {{methodName}} a {{../packageName}} using raw JSON payload (executes immediately) - returns raw Response.
     */
    Response {{methodName}}Raw(String jsonPayload) throws Exception {
        {{#if (eq httpMethod "post")}}
        return postJson("{{path}}", jsonPayload);
        {{else}}
        throw new UnsupportedOperationException("JSON payload not supported for GET operations");
        {{/if}}
    }

    public {{returnType}} {{methodName}}({{paramsClassName}} params) throws Exception {
        Response response = {{methodName}}Raw(params);
        {{#if isListResponse}}
        return {{returnType}}.fromJson(response.getBodyAsString(), this, params);
        {{else}}
        return parseResponse(response, {{returnType}}.class);
        {{/if}}
    }

    {{/if}}
    {{/each}}
}