///<reference path='../../../types/index.d.ts'/>
{{#each events}}

export interface {{snakeCaseToPascalCase type}}Content {
{{#each resource_schemas}}
  {{this}}: import('chargebee').{{this}};
{{/each}}
}
{{/each}}

import { WebhookEventType } from './eventType.js';

/**
 * Maps webhook event types to their corresponding content types.
 * Used for type-safe access to event.content based on event_type.
 */
export type WebhookContentMap = {
{{#each events}}
  [WebhookEventType.{{snakeCaseToPascalCase type}}]: {{snakeCaseToPascalCase type}}Content;
{{/each}}
};

/**
 * Utility type to get the content type for a specific webhook event type.
 * @example
 * type SubCreatedContent = ContentFor<WebhookEventType.SubscriptionCreated>;
 */
export type ContentFor<T extends WebhookEventType> = WebhookContentMap[T];

/**
 * Webhook event payload from Chargebee.
 * 
 * @typeParam T - The specific event type. When provided, `content` is strongly typed.
 *                Defaults to `WebhookEventType` for backward compatibility (content becomes union of all types).
 * 
 * @example
 * // Backward compatible usage (content is union of all content types)
 * const event: WebhookEvent = payload;
 * 
 * // Type-safe usage with specific event type
 * const event: WebhookEvent<WebhookEventType.SubscriptionCreated> = payload;
 * event.content.Subscription; // âœ“ Typed as Subscription
 */
export interface WebhookEvent<T extends WebhookEventType = WebhookEventType> {
  id: string;
  occurred_at: number;
  source: string;
  user?: string;
  webhook_status: string;
  webhook_failure_reason?: string;
  webhooks?: any[];
  event_type: T;
  api_version: string;
  content: ContentFor<T>;
}
